@model VendingNEA_0.Models.Acuerdo

@{
    ViewData["Title"] = "Detalles del acuerdo";
}

<h1>Detalles del acuerdo</h1>

<hr />

<div class="card mb-3 p-3">
    <h4>Información general</h4>
    <dl class="row mt-2">
        <dt class="col-sm-3">N° Acuerdo</dt>
        <dd class="col-sm-9">@Model.NumAcuerdo</dd>

        <dt class="col-sm-3">Fecha inicio</dt>
        <dd class="col-sm-9">@Model.FechaInicio?.ToShortDateString()</dd>

        <dt class="col-sm-3">Fecha finalización</dt>
        <dd class="col-sm-9">@Model.FechaFinalizacion?.ToShortDateString()</dd>

        <dt class="col-sm-3">Establecimiento</dt>
        <dd class="col-sm-9">
            @Model.CuitNavigation?.NombreComercial (@Model.CuitNavigation?.Cuit)
        </dd>

        <dt class="col-sm-3">Máquina</dt>
        <dd class="col-sm-9">
            N° @Model.NumSerieNavigation?.NumSerie -
            @Model.NumSerieNavigation?.Descripcion
            (@Model.NumSerieNavigation?.Marca)
        </dd>
    </dl>
</div>

<hr />

<<h4>Condiciones comerciales</h4>

@if (Model.CodCondicions != null && Model.CodCondicions.Any())
{
    <ul class="list-group mb-3">
        @foreach (var cond in Model.CodCondicions)
        {
            <li class="list-group-item">
                @* Comisión *@
                @if (cond.CondicionComision != null)
                {
                    <text>
                        <strong>Comisión:</strong>
                        @cond.CondicionComision.Porcentaje %
                    </text>
                }
                @* Monto fijo *@
                else if (cond.CondicionMonto != null)
                {
                    <text>
                        <strong>Monto fijo:</strong>
                        @string.Format("AR$ {0:N2}", cond.CondicionMonto.Monto)
                    </text>
                }
                @* Sin detalle *@
                else
                {
                    <text>
                        <strong>@cond.Nombre</strong>
                    </text>
                }
            </li>
        }
    </ul>
}
else
{
    <p>No hay condiciones cargadas para este acuerdo.</p>
}


<div class="mb-3">
    <a asp-controller="Condicions"
       asp-action="Create"
       asp-route-numAcuerdo="@Model.NumAcuerdo"
       class="btn btn-sm btn-primary">
        Agregar condición
    </a>
</div>

<hr />

<div class="mt-3">
    <a asp-action="Index"
       class="btn btn-secondary">
        <i class="bi bi-arrow-left-circle me-2"></i>Volver al listado
    </a>
</div>
